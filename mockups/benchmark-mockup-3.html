<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Benchmark Research - Mockup 3: Visual Dashboard with Full Comparison</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .center-chip { transition: all 0.2s; }
        .center-chip:hover { transform: scale(1.05); }
        .center-chip.selected { ring: 3px solid; }
        .metric-bar { transition: width 0.5s ease-out; }
    </style>
</head>
<body class="bg-slate-900 min-h-screen text-white">
    <!-- Header -->
    <div class="border-b border-slate-700 px-6 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-4">
                <span class="text-slate-400 text-sm">Research / Prompt 1</span>
                <h1 class="text-xl font-bold">Benchmarking Analysis</h1>
            </div>
            <div class="flex gap-2">
                <button class="px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-sm">Export</button>
                <button class="px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg text-sm font-medium">Full Report</button>
            </div>
        </div>
    </div>

    <div class="p-6">
        <!-- Top Stats Row -->
        <div class="grid grid-cols-6 gap-4 mb-6">
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <div class="text-slate-400 text-xs mb-1">Centers Analyzed</div>
                <div class="text-3xl font-bold">11</div>
            </div>
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <div class="text-slate-400 text-xs mb-1">Average Size</div>
                <div class="text-3xl font-bold text-blue-400">29.5K<span class="text-lg text-slate-500"> sq ft</span></div>
            </div>
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <div class="text-slate-400 text-xs mb-1">Average Investment</div>
                <div class="text-3xl font-bold text-green-400">$14.2M</div>
            </div>
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <div class="text-slate-400 text-xs mb-1">Average Staff</div>
                <div class="text-3xl font-bold text-purple-400">12<span class="text-lg text-slate-500"> FTEs</span></div>
            </div>
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <div class="text-slate-400 text-xs mb-1">Avg Learners/Year</div>
                <div class="text-3xl font-bold text-amber-400">15K+</div>
            </div>
            <div class="bg-slate-800 rounded-xl p-4 border border-slate-700">
                <div class="text-slate-400 text-xs mb-1">SSH Accredited</div>
                <div class="text-3xl font-bold text-cyan-400">82%</div>
            </div>
        </div>

        <!-- Center Selection Chips -->
        <div class="bg-slate-800 rounded-xl p-4 mb-6 border border-slate-700">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-3">
                    <h2 class="font-semibold">Select Centers to Compare</h2>
                    <span class="text-slate-400 text-sm">(Click to toggle)</span>
                </div>
                <div class="flex items-center gap-2">
                    <span class="text-slate-400 text-sm">Selected: <span class="text-white font-bold" id="selectedCount">0</span></span>
                    <button onclick="clearAll()" class="text-slate-400 hover:text-white text-sm">Clear All</button>
                </div>
            </div>
            <div class="flex flex-wrap gap-3" id="centerChips">
                <!-- Chips will be generated by JS -->
            </div>
        </div>

        <!-- Main Dashboard Grid -->
        <div class="grid grid-cols-3 gap-6">
            <!-- Left Column: Charts -->
            <div class="col-span-2 space-y-6">
                <!-- Size vs Investment Scatter -->
                <div class="bg-slate-800 rounded-xl p-5 border border-slate-700">
                    <h3 class="font-semibold mb-4">Size vs Investment (Selected Centers)</h3>
                    <div class="h-72">
                        <canvas id="scatterChart"></canvas>
                    </div>
                </div>

                <!-- Bar Chart Comparison -->
                <div class="grid grid-cols-2 gap-6">
                    <div class="bg-slate-800 rounded-xl p-5 border border-slate-700">
                        <h3 class="font-semibold mb-4">Facility Size Comparison</h3>
                        <div class="h-64">
                            <canvas id="sizeChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-slate-800 rounded-xl p-5 border border-slate-700">
                        <h3 class="font-semibold mb-4">Staff FTE Comparison</h3>
                        <div class="h-64">
                            <canvas id="staffChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Learner Volume Over Time -->
                <div class="bg-slate-800 rounded-xl p-5 border border-slate-700">
                    <h3 class="font-semibold mb-4">Learner Capacity Comparison</h3>
                    <div class="h-64">
                        <canvas id="learnerChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Right Column: Center Detail Cards -->
            <div class="space-y-4" id="selectedCards">
                <div class="text-center text-slate-500 py-12">
                    <svg class="w-16 h-16 mx-auto mb-4 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                    <p>Select centers above to see details and comparison</p>
                </div>
            </div>
        </div>

        <!-- Full Comparison Matrix -->
        <div class="bg-slate-800 rounded-xl p-5 border border-slate-700 mt-6">
            <h3 class="font-semibold mb-4">Detailed Comparison Matrix</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-sm" id="comparisonTable">
                    <thead class="text-slate-400 border-b border-slate-700">
                        <tr>
                            <th class="text-left py-3 px-4">Metric</th>
                            <!-- Headers will be added dynamically -->
                        </tr>
                    </thead>
                    <tbody id="comparisonBody">
                        <!-- Rows will be added dynamically -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Center Data
        const centers = [
            { id: 'osf', name: 'OSF Jump', fullName: 'OSF HealthCare - Jump Trading Center', location: 'Peoria, IL', year: 2013, sqft: 168000, investment: 50, staff: 75, learners: 220000, maturity: 'Mature', color: '#3b82f6', accreditation: 'SSH/ACS', funding: '$25M donor + $25M match', outcomes: ['$180M economic impact', 'Reduced HACs', '12.8K K-12 students trained'] },
            { id: 'atrium', name: 'Atrium Carolinas', fullName: 'Atrium Health - Carolinas Simulation Center', location: 'Charlotte, NC', year: 2007, sqft: 25000, investment: 12.5, staff: 20, learners: 5000, maturity: 'Mature', color: '#10b981', accreditation: 'SSH/ACS Distinguished', funding: 'Hospital budget', outcomes: ['Regional alliance leader', 'Improved skills', 'Dual accreditation'] },
            { id: 'nch', name: 'NCH Herb', fullName: 'NCH Healthcare - Herb Family Sim Center', location: 'Naples, FL', year: 2020, sqft: 12000, investment: 6.5, staff: 6, learners: 4032, maturity: 'Scaling', color: '#f59e0b', accreditation: '-', funding: 'Philanthropy + hospital', outcomes: ['2x volume each year', '18.6K hours (2023)', 'Improved patient sat'] },
            { id: 'sharp', name: 'Sharp Prebys', fullName: 'Sharp HealthCare - Prebys Innovation Center', location: 'San Diego, CA', year: 2023, sqft: 70000, investment: 27.5, staff: 17, learners: 3000, maturity: 'Startup', color: '#8b5cf6', accreditation: 'SSH Provisional', funding: 'Prebys Foundation gift', outcomes: ['Supports 7K nurses', 'AI/VR innovation lab', 'International exchange'] },
            { id: 'riverside', name: 'Riverside', fullName: 'Riverside Health - Simulation Training Lab', location: 'Newport News, VA', year: 2020, sqft: 8400, investment: 4, staff: 4, learners: 3933, maturity: 'Scaling', color: '#ec4899', accreditation: 'SSH Accredited', funding: 'Hospital capital project', outcomes: ['20%+ skill improvement', '4 IMSH presentations', 'Rapid accreditation'] },
            { id: 'parkview', name: 'Parkview Mirro', fullName: 'Parkview Health - Mirro Center Simulation Lab', location: 'Fort Wayne, IN', year: 2015, sqft: 4000, investment: 5, staff: 5, learners: 1500, maturity: 'Scaling', color: '#14b8a6', accreditation: 'SSH/ACS', funding: 'Philanthropy + grants', outcomes: ['Mobile sim unit', '3D printing', 'Rural outreach'] },
            { id: 'baycare', name: 'BayCare', fullName: 'BayCare Health System - Simulation Program', location: 'West Central FL', year: 2015, sqft: 10000, investment: 10, staff: 20, learners: 8000, maturity: 'Mature', color: '#06b6d4', accreditation: 'SSH Accredited', funding: 'Operational budget', outcomes: ['15 hospital network', 'VR early adopter', 'Reduced errors'] },
            { id: 'rwj', name: 'RWJBarnabas', fullName: 'RWJBarnabas Health - Institute for Nursing Excellence', location: 'New Jersey', year: 2023, sqft: 8000, investment: 10, staff: 12, learners: 600, maturity: 'Scaling', color: '#f97316', accreditation: 'SSH Provisional', funding: 'System investment', outcomes: ['12 hospital system', 'Reduced RN turnover', 'Standardized practice'] },
            { id: 'carilion', name: 'Carilion', fullName: 'Carilion Clinic - Center for Simulation, Research & Patient Safety', location: 'Roanoke, VA', year: 2013, sqft: 10000, investment: 8, staff: 10, learners: 2000, maturity: 'Mature', color: '#84cc16', accreditation: 'SSH Accredited', funding: 'Carilion + VT grants', outcomes: ['Tesseract 360° room', 'Human factors focus', 'Device testing'] },
            { id: 'uab', name: 'UAB', fullName: 'UAB Medicine - Clinical Simulation Program', location: 'Birmingham, AL', year: 2010, sqft: 15000, investment: 12, staff: 15, learners: 5000, maturity: 'Mature', color: '#a855f7', accreditation: 'SSH Accredited', funding: 'UAB budget + state grants', outcomes: ['SimFirst culture', 'Mobile lab statewide', 'Cross-disciplinary'] },
            { id: 'cleveland', name: 'Cleveland Clinic', fullName: 'Cleveland Clinic Simulation Center', location: 'Cleveland, OH', year: 2004, sqft: 40000, investment: 18, staff: 30, learners: 43831, maturity: 'Mature', color: '#e11d48', accreditation: 'SSH/ACS', funding: 'Institution + grants', outcomes: ['43.8K learners (2023)', 'Robotic surgery sim', 'Research leader'] }
        ];

        let selectedCenters = [];
        let scatterChart, sizeChart, staffChart, learnerChart;

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderChips();
            // Pre-select a few centers
            toggleCenter('osf');
            toggleCenter('nch');
            toggleCenter('riverside');
        });

        function renderChips() {
            const container = document.getElementById('centerChips');
            container.innerHTML = centers.map(c => `
                <button
                    id="chip-${c.id}"
                    onclick="toggleCenter('${c.id}')"
                    class="center-chip px-4 py-2 rounded-full text-sm font-medium transition-all"
                    style="background: ${c.color}20; color: ${c.color}; border: 2px solid ${c.color}40"
                >
                    ${c.name}
                    <span class="ml-1 opacity-60">(${c.year})</span>
                </button>
            `).join('');
        }

        function toggleCenter(id) {
            const index = selectedCenters.indexOf(id);
            if (index > -1) {
                selectedCenters.splice(index, 1);
            } else {
                selectedCenters.push(id);
            }
            updateUI();
        }

        function clearAll() {
            selectedCenters = [];
            updateUI();
        }

        function updateUI() {
            // Update chips
            centers.forEach(c => {
                const chip = document.getElementById('chip-' + c.id);
                const isSelected = selectedCenters.includes(c.id);
                chip.style.background = isSelected ? c.color : c.color + '20';
                chip.style.color = isSelected ? 'white' : c.color;
                chip.style.borderColor = isSelected ? c.color : c.color + '40';
            });

            // Update count
            document.getElementById('selectedCount').textContent = selectedCenters.length;

            // Update cards
            renderCards();

            // Update charts
            updateCharts();

            // Update comparison table
            updateComparisonTable();
        }

        function renderCards() {
            const container = document.getElementById('selectedCards');
            if (selectedCenters.length === 0) {
                container.innerHTML = `
                    <div class="text-center text-slate-500 py-12">
                        <svg class="w-16 h-16 mx-auto mb-4 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                        <p>Select centers above to see details</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = selectedCenters.map(id => {
                const c = centers.find(x => x.id === id);
                return `
                    <div class="bg-slate-800 rounded-xl p-4 border-l-4" style="border-color: ${c.color}">
                        <div class="flex items-start justify-between mb-3">
                            <div>
                                <h4 class="font-semibold" style="color: ${c.color}">${c.name}</h4>
                                <p class="text-slate-400 text-xs">${c.location} | Est. ${c.year}</p>
                            </div>
                            <span class="px-2 py-1 text-xs font-medium rounded" style="background: ${c.color}20; color: ${c.color}">${c.maturity}</span>
                        </div>
                        <div class="grid grid-cols-2 gap-2 mb-3">
                            <div class="bg-slate-700/50 rounded p-2 text-center">
                                <div class="text-lg font-bold">${(c.sqft/1000).toFixed(0)}K</div>
                                <div class="text-xs text-slate-400">sq ft</div>
                            </div>
                            <div class="bg-slate-700/50 rounded p-2 text-center">
                                <div class="text-lg font-bold">$${c.investment}M</div>
                                <div class="text-xs text-slate-400">investment</div>
                            </div>
                            <div class="bg-slate-700/50 rounded p-2 text-center">
                                <div class="text-lg font-bold">${c.staff}</div>
                                <div class="text-xs text-slate-400">staff</div>
                            </div>
                            <div class="bg-slate-700/50 rounded p-2 text-center">
                                <div class="text-lg font-bold">${(c.learners/1000).toFixed(c.learners >= 10000 ? 0 : 1)}K</div>
                                <div class="text-xs text-slate-400">learners/yr</div>
                            </div>
                        </div>
                        <div class="border-t border-slate-700 pt-3">
                            <p class="text-xs text-slate-400 mb-1">Key Outcomes:</p>
                            <ul class="text-xs text-slate-300 space-y-1">
                                ${c.outcomes.slice(0,2).map(o => `<li>• ${o}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateCharts() {
            const selected = selectedCenters.map(id => centers.find(c => c.id === id));
            const labels = selected.map(c => c.name);
            const colors = selected.map(c => c.color);

            // Scatter Chart
            if (scatterChart) scatterChart.destroy();
            scatterChart = new Chart(document.getElementById('scatterChart'), {
                type: 'scatter',
                data: {
                    datasets: selected.map(c => ({
                        label: c.name,
                        data: [{ x: c.sqft / 1000, y: c.investment }],
                        backgroundColor: c.color,
                        borderColor: c.color,
                        pointRadius: 12,
                        pointHoverRadius: 15
                    }))
                },
                options: {
                    scales: {
                        x: { title: { display: true, text: 'Size (K sq ft)', color: '#94a3b8' }, grid: { color: '#334155' }, ticks: { color: '#94a3b8' } },
                        y: { title: { display: true, text: 'Investment ($M)', color: '#94a3b8' }, grid: { color: '#334155' }, ticks: { color: '#94a3b8' } }
                    },
                    plugins: { legend: { labels: { color: '#e2e8f0' } } }
                }
            });

            // Size Chart
            if (sizeChart) sizeChart.destroy();
            sizeChart = new Chart(document.getElementById('sizeChart'), {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{ data: selected.map(c => c.sqft / 1000), backgroundColor: colors }]
                },
                options: {
                    indexAxis: 'y',
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { title: { display: true, text: 'K sq ft', color: '#94a3b8' }, grid: { color: '#334155' }, ticks: { color: '#94a3b8' } },
                        y: { grid: { color: '#334155' }, ticks: { color: '#e2e8f0' } }
                    }
                }
            });

            // Staff Chart
            if (staffChart) staffChart.destroy();
            staffChart = new Chart(document.getElementById('staffChart'), {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{ data: selected.map(c => c.staff), backgroundColor: colors }]
                },
                options: {
                    indexAxis: 'y',
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { title: { display: true, text: 'FTEs', color: '#94a3b8' }, grid: { color: '#334155' }, ticks: { color: '#94a3b8' } },
                        y: { grid: { color: '#334155' }, ticks: { color: '#e2e8f0' } }
                    }
                }
            });

            // Learner Chart
            if (learnerChart) learnerChart.destroy();
            learnerChart = new Chart(document.getElementById('learnerChart'), {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{ data: selected.map(c => c.learners / 1000), backgroundColor: colors }]
                },
                options: {
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { grid: { color: '#334155' }, ticks: { color: '#e2e8f0' } },
                        y: { title: { display: true, text: 'Learners (K/year)', color: '#94a3b8' }, grid: { color: '#334155' }, ticks: { color: '#94a3b8' } }
                    }
                }
            });
        }

        function updateComparisonTable() {
            const selected = selectedCenters.map(id => centers.find(c => c.id === id));
            const thead = document.querySelector('#comparisonTable thead tr');
            const tbody = document.getElementById('comparisonBody');

            // Headers
            thead.innerHTML = '<th class="text-left py-3 px-4">Metric</th>' +
                selected.map(c => `<th class="text-center py-3 px-4" style="color: ${c.color}">${c.name}</th>`).join('');

            // Rows
            const metrics = [
                { label: 'Established', key: 'year' },
                { label: 'Location', key: 'location' },
                { label: 'Size (sq ft)', key: 'sqft', format: v => v.toLocaleString() },
                { label: 'Investment', key: 'investment', format: v => '$' + v + 'M' },
                { label: 'Staff FTEs', key: 'staff' },
                { label: 'Learners/Year', key: 'learners', format: v => v.toLocaleString() },
                { label: 'Maturity', key: 'maturity' },
                { label: 'Accreditation', key: 'accreditation' },
                { label: 'Funding Model', key: 'funding' }
            ];

            tbody.innerHTML = metrics.map(m => `
                <tr class="border-b border-slate-700 hover:bg-slate-700/30">
                    <td class="py-3 px-4 text-slate-400">${m.label}</td>
                    ${selected.map(c => {
                        const val = c[m.key];
                        const formatted = m.format ? m.format(val) : val;
                        return `<td class="py-3 px-4 text-center">${formatted}</td>`;
                    }).join('')}
                </tr>
            `).join('');
        }
    </script>
</body>
</html>
